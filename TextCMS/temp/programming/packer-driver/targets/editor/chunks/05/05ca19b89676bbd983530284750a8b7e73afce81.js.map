{"version":3,"sources":["file:///D:/CMS/TextCMS/assets/Scripts/Item.ts"],"names":["_decorator","Component","Node","Label","find","assetManager","Sprite","SpriteFrame","Texture2D","EditBox","AudioSource","Gamemanager","datajs","move","ccclass","property","Item","baseurl","nodeSave","Index","scroll","item","start","iditem","string","btnTPNL","active","PositionAns","forEach","element","setSiblingIndex","scrollevent","event","console","log","_scrolling","UploadFile","namenode","target","uuid","cc","sys","isBrowser","ipFile","document","createElement","type","accept","click","addEventListener","img","canvas","reader","FileReader","onload","progressEvent","src","result","ctx","getContext","drawImage","MAX_WIDTH","MAX_HEIGHT","width","height","dataUrl","toDataURL","replace","fetch","then","res","arrayBuffer","buffer","files","readAsDataURL","myHeaders","Headers","append","formdata","FormData","name","requestOptions","method","headers","body","redirect","response","text","classItem","JSON","parse","url","setImage","catch","error","bgUpload","remoteUrl","loadRemote","err","imageAsset","spr","getComponent","spriteFrame","tex","image","texture","textlabel","OpenPopup","gamemanager","OpenpopupUpload","getData","warn","baseUrlfile","RootObject","Title","IdItem","question","answer","ques","Question","Image","Questnode","Sound","stringpositonjson","pos","position","x","y","obj","Number","getChildByName","push","Json","stringify","Id","uuidv4","i","ans","Answer","Text","AmountItem","playSound","id","audioClip","node","clip","play","LoadData","jsondata","deserializeJson","setAmountItem","length","LoadImage","listPos","setPosition","enablesound","customdata","c","crypto","getRandomValues","Uint8Array","toString","addTPNL","window","top","showmodal"],"mappings":"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","sourcesContent":["import {\r\n  _decorator,\r\n  Component,\r\n  Node,\r\n  Label,\r\n  Button,\r\n  find,\r\n  CCObject,\r\n  assetManager,\r\n  Sprite,\r\n  SpriteFrame,\r\n  Texture2D,\r\n  EditBox,\r\n  Toggle,\r\n  AudioClip,\r\n  AudioSource,\r\n} from \"cc\";\r\nimport { Gamemanager } from \"./Gamemanager\";\r\nconst { ccclass, property } = _decorator;\r\nimport * as datajs from \"./JsonData\";\r\nimport { move } from \"./move\";\r\n@ccclass(\"Item\")\r\nexport class Item extends Component {\r\n  @property(Node)\r\n  PositionAns: Node[] = [];\r\n\r\n\r\n@property(Node)\r\nbtnTPNL : Node = null;\r\n\r\n  @property(Label)\r\n  PageName: Label = null;\r\n  @property(Label)\r\n  iditem: Label = null;\r\n\r\n  @property(EditBox)\r\n  Title: EditBox = null;\r\n\r\n  baseurl = \"\";\r\n  nodeSave: Node = null;\r\n\r\n  Index = 4;\r\n  @property(Node)\r\n  AmountItem: Node[] = [];\r\n  @property(Node)\r\n  Questnode: Node = null;\r\n  public scroll = true;\r\n\r\n  @property(SpriteFrame)\r\n  enablesound: SpriteFrame = null;\r\n\r\n  @property(Node)\r\n  bgUpload: Node = null;\r\n\r\n  start() {\r\n\r\n    if(this.iditem.string != \"00000000-0000-0000-0000-000000000000\"){\r\n      this.btnTPNL.active = true;\r\n    }\r\n\r\n    this.PositionAns.forEach((element) => {\r\n      element.setSiblingIndex(100000);\r\n    });\r\n\r\n    \r\n  }\r\n\r\n  public scrollevent(event) {\r\n    console.log(event._scrolling);\r\n    if (event._scrolling == true) {\r\n      this.scroll = false;\r\n    } else {\r\n      this.scroll = true;\r\n    }\r\n  }\r\n\r\n  UploadFile(event) {\r\n    var namenode = event.target.uuid;\r\n    console.log(event.target.uuid);\r\n    console.log(event.target);\r\n    this.nodeSave = event.target;\r\n    //   console.log(\"aaaaa\",find(\"Canvas\"))\r\n    if (cc.sys.isBrowser) {\r\n      let ipFile = document.createElement(\"input\");\r\n      ipFile.type = \"file\";\r\n      ipFile.accept = \"image/png\";\r\n      console.log(\"ipFile\", ipFile);\r\n      ipFile.click();\r\n      ipFile.addEventListener(\r\n        \"change\",\r\n        () => {\r\n          var img = document.createElement(\"img\");\r\n          var canvas = document.createElement(\"canvas\");\r\n          var reader = new FileReader();\r\n          reader.onload = function (progressEvent) {\r\n            img.src = progressEvent.target.result;\r\n            img.onload = function () {\r\n              // access image size here\r\n              var ctx = canvas.getContext(\"2d\");\r\n              ctx.drawImage(img, 0, 0);\r\n\r\n              var MAX_WIDTH = 800;\r\n              var MAX_HEIGHT = 600;\r\n              var width = img.width;\r\n              var height = img.height;\r\n\r\n              if (width > height) {\r\n                if (width > MAX_WIDTH) {\r\n                  height *= MAX_WIDTH / width;\r\n                  width = MAX_WIDTH;\r\n                }\r\n              } else {\r\n                if (height > MAX_HEIGHT) {\r\n                  width *= MAX_HEIGHT / height;\r\n                  height = MAX_HEIGHT;\r\n                }\r\n              }\r\n              canvas.width = width;\r\n              canvas.height = height;\r\n              var ctx = canvas.getContext(\"2d\");\r\n              ctx.drawImage(img, 0, 0, width, height);\r\n              var dataUrl = canvas.toDataURL(\"image/png\");\r\n              console.log(\"buffer\", dataUrl);\r\n              dataUrl =\r\n                \"data:application/octet-binary;base64,\" +\r\n                dataUrl.replace(\"data:image/png;base64,\", \"\");\r\n              fetch(dataUrl)\r\n                .then((res) => res.arrayBuffer())\r\n                .then((buffer) => {\r\n                  console.log(\"buffer\", buffer);\r\n                });\r\n            };\r\n          };\r\n          console.log(\"ipFile.files[0]\", ipFile.files);\r\n          reader.readAsDataURL(ipFile.files[0]);\r\n          // call Api\r\n\r\n          var myHeaders = new Headers();\r\n          myHeaders.append(\r\n            \"Cookie\",\r\n            \".AspNetCore.Session=CfDJ8GmrYVI6VxlFp5hvVMclUtanrpD%2BHH0oRRUDw6oaMn3NwyayHlyo3pNzp%2BEoa5sTRFRu%2Fiycjkfhs3cCAhcMz%2FI7uzsM8IQhc14aMSSnuv8PAShbhhpB538WNIJQxIwHCpD%2BNRNl1pW04TW%2FgN9%2BD%2BQcZFNbTHkI7U%2BOu4E7BK59\"\r\n          );\r\n\r\n          var formdata = new FormData();\r\n          formdata.append(\"Item\", ipFile.files[0], ipFile.files[0].name);\r\n          formdata.append(\"ClassItem\", namenode);\r\n\r\n          var requestOptions = {\r\n            method: \"POST\",\r\n            headers: myHeaders,\r\n            body: formdata,\r\n            redirect: \"follow\",\r\n          };\r\n\r\n          fetch(\"http://localhost:64457/Api/UploadFile\", requestOptions)\r\n            .then((response) => response.text())\r\n            .then((result) => {\r\n              console.log(result);\r\n              let classItem = JSON.parse(result).classItem;\r\n              let url = JSON.parse(result).url;\r\n              console.log(this.nodeSave.uuid);\r\n\r\n              this.setImage(url);\r\n            })\r\n            .catch((error) => console.log(\"error\", error));\r\n        },\r\n        false\r\n      );\r\n      this.bgUpload.active = false\r\n    }\r\n\r\n  }\r\n\r\n  setImage(remoteUrl) {\r\n    assetManager.loadRemote(remoteUrl, (err, imageAsset) => {\r\n      var spr = find(\"Mask/Sprite\", this.nodeSave);\r\n      console.log(spr);\r\n      console.log(spr.getComponent(Sprite));\r\n      console.log(\"spriteFrame\", spr.getComponent(Sprite).spriteFrame);\r\n      console.log(\"spriteFrame\", imageAsset);\r\n      const spriteFrame = new SpriteFrame();\r\n      const tex = new Texture2D();\r\n      tex.image = imageAsset;\r\n      spriteFrame.texture = tex;\r\n      spr.getComponent(Sprite).spriteFrame = spriteFrame;\r\n    });\r\n\r\n    var textlabel = find(\"Mask/Sprite/Label_sprite\", this.nodeSave);\r\n    textlabel.getComponent(Label).string = remoteUrl;\r\n  }\r\n\r\n  OpenPopup(event) {\r\n    if (this.scroll == true) {\r\n      var gamemanager = find(\"Canvas/GameManager\")\r\n        .getComponent(Gamemanager)\r\n        .OpenpopupUpload(event.target);\r\n      console.log(gamemanager);\r\n    }\r\n  }\r\n  item: datajs.RootObject = null;\r\n\r\n  public getData() {\r\n    console.warn(this.Index);\r\n    var gamemanager = find(\"Canvas/GameManager\").getComponent(Gamemanager);\r\n    this.baseurl = gamemanager.baseUrlfile;\r\n\r\n    this.item = new datajs.RootObject();\r\n\r\n    this.item.Title = this.Title.string;\r\n    this.item.IdItem = this.iditem.string;\r\n    this.item.question = [];\r\n    this.item.answer = [];\r\n\r\n    var ques = new datajs.Question();\r\n    ques.Image = find(\"Mask/Sprite/Label_sprite\", this.Questnode)\r\n      .getComponent(Label)\r\n      .string.replace(this.baseurl, \"\"); // url img\r\n    ques.Sound = find(\"sound/Label_sound\", this.Questnode)\r\n      .getComponent(Label)\r\n      .string.replace(this.baseurl, \"\"); // url sound\r\n    \r\n    // ques.Text = find(\"ContentIMG/Mask/Sprite/Label_sprite\", this.Questnode)\r\n    //   .getComponent(Label)\r\n    //   .string.replace(this.baseurl, \"\"); // anh cho keo position dien cau hoi\r\n    // var stringpositonjson = [\r\n    //   [0, this.PositionAns[0].position.x, this.PositionAns[0].position.y],\r\n    //   [1, this.PositionAns[1].position.x, this.PositionAns[1].position.y],\r\n    //   [2, this.PositionAns[2].position.x, this.PositionAns[2].position.y],\r\n    //   [3, this.PositionAns[3].position.x, this.PositionAns[3].position.y],\r\n    //   [4, this.PositionAns[4].position.x, this.PositionAns[4].position.y],\r\n    // ];\r\n    var stringpositonjson = [];\r\n    this.PositionAns.forEach(element => {\r\n      console.log(element.getComponent(move).pos,element.position);\r\n      if(element.getComponent(move).pos.x != element.position.x && element.getComponent(move).pos.y != element.position.y && element.active == true){\r\n        // console.log(\"position da thay doi!\");\r\n        var obj = [Number(element.getChildByName(\"Label\").getComponent(Label).string),element.position.x,element.position.y]\r\n        stringpositonjson.push(obj);\r\n      }else{\r\n        // console.log(\"position khong thay doi!\");\r\n      }\r\n    });\r\n    ques.Json = JSON.stringify(stringpositonjson);\r\n    // them position sua doan nay\r\n    //\r\n\r\n    console.log(\"QuestJson=>\",ques.Json);\r\n    ques.Id = this.uuidv4();\r\n    this.item.question.push(ques);\r\n\r\n    for (var i = 0; i < this.Index; i++) {\r\n      var ans = new datajs.Answer();\r\n      ans.Text =  find(\"Sprite/Content\",this.AmountItem[i]).getComponent(EditBox).string.replace(this.baseurl, \"\");; // url content\r\n\r\n      ans.Image = find(\"ContentIMG/Mask/Sprite/Label_sprite\", this.AmountItem[i]).getComponent(Label).string.replace(this.baseurl, \"\"); // url img\r\n\r\n      ans.Sound = find(\"sound/Label_sound\", this.AmountItem[i]).getComponent(Label).string.replace(this.baseurl, \"\"); // url sound ans\r\n      ans.Index = i;\r\n      ans.Id = this.uuidv4();\r\n      this.item.answer.push(ans);\r\n    }\r\n  }\r\n\r\n  playSound(event, id) {\r\n    console.log(id);\r\n    console.log(\r\n      event.target.getChildByName(\"Label_sound\").getComponent(Label).string\r\n    );\r\n    var url = event.target\r\n      .getChildByName(\"Label_sound\")\r\n      .getComponent(Label).string;\r\n    assetManager.loadRemote(url, (err, audioClip: AudioClip) => {\r\n      // this.node.getComponent(cc.AudioSource).clip.clear();\r\n      this.node.getComponent(AudioSource).clip = audioClip;\r\n      this.node.getComponent(AudioSource).play();\r\n    });\r\n  }\r\n\r\n  LoadData(jsondata) {\r\n    var gamemanager = find(\"Canvas/GameManager\").getComponent(Gamemanager);\r\n    this.baseurl = gamemanager.baseUrlfile;\r\n\r\n    var deserializeJson = JSON.parse(jsondata);\r\n    console.log(\"data deserialize=> \", deserializeJson);\r\n    // console.log(\"so luong cau => \", deserializeJson.answer.length);\r\n    this.setAmountItem(null, deserializeJson.answer.length);\r\n\r\n    this.Title.string = deserializeJson.Title;\r\n\r\n    for (var i = 0; i < deserializeJson.question.length; i++) {\r\n      console.log(\"question: \", deserializeJson.question[i]);\r\n      find(\"Mask/Sprite/Label_sprite\", this.Questnode).getComponent(\r\n        Label\r\n      ).string = this.baseurl + deserializeJson.question[i].Image;\r\n      find(\"sound/Label_sound\", this.Questnode).getComponent(Label).string =\r\n        this.baseurl + deserializeJson.question[i].Sound;\r\n      find(\"Sprite/Content\", this.Questnode).getComponent(EditBox).string =\r\n        deserializeJson.question[i].Text;\r\n\r\n      // load position\r\n      find(\"ContentIMG/Mask/Sprite/Label_sprite\", this.Questnode).getComponent(\r\n        Label\r\n      ).string = deserializeJson.question[i].Text;\r\n      this.LoadImage(\r\n        this.baseurl + deserializeJson.question[i].Text,\r\n        find(\"ContentIMG/Mask/Sprite\", this.Questnode).getComponent(Sprite)\r\n      );\r\n      console.log(\r\n        \"JSON POSITON: \",\r\n        JSON.parse(deserializeJson.question[i].Json)\r\n      );\r\n      // load position\r\n      var listPos = JSON.parse(deserializeJson.question[i].Json);\r\n      // console.log(listPos[0]);\r\n      // console.log(listPos[0][1], listPos[0][2]);\r\n      for(var i = 0; i < listPos.length;i++){\r\n        // console.error(\"POSITION=> \",listPos[i]);\r\n        console.log(i);\r\n        this.PositionAns[listPos[i][0]].setPosition(listPos[i][1],listPos[i][2]);\r\n      }\r\n\r\n      this.LoadImage(\r\n        this.baseurl + deserializeJson.question[0].Image,\r\n        find(\"Mask/Sprite\", this.Questnode).getComponent(Sprite)\r\n      );\r\n      if (this.baseurl + deserializeJson.question[0].Sound != this.baseurl) {\r\n        find(\"sound\", this.Questnode).getComponent(Sprite).spriteFrame =\r\n          this.enablesound;\r\n      }\r\n    }\r\n\r\n    for (var i = 0; i < deserializeJson.answer.length; i++) {\r\n      find(\"Mask/Sprite/Label_sprite\", this.AmountItem[i]).getComponent(\r\n        Label\r\n      ).string = this.baseurl + deserializeJson.answer[i].Image;\r\n      find(\"sound/Label_sound\", this.AmountItem[i]).getComponent(Label).string =\r\n        this.baseurl + deserializeJson.answer[i].Sound;\r\n      this.LoadImage(\r\n        this.baseurl + deserializeJson.answer[i].Image,\r\n        find(\"Mask/Sprite\", this.AmountItem[i]).getComponent(Sprite)\r\n      );\r\n      if (this.baseurl + deserializeJson.answer[i].Sound != this.baseurl) {\r\n        find(\"sound\", this.AmountItem[i]).getComponent(Sprite).spriteFrame =\r\n          this.enablesound;\r\n      }\r\n    }\r\n\r\n    // this.LoadImage(this.url_img_ans1.string, this.spr_a1);\r\n    // this.LoadImage(this.url_img_ans2.string, this.spr_a2);\r\n    // this.LoadImage(this.url_img_ans3.string, this.spr_a3);\r\n    // this.LoadImage(this.url_img_ans4.string, this.spr_a4);\r\n    // this.LoadImage(this.url_img_question.string, this.spr_q);\r\n\r\n    // if (this.url_sound_question.string != this.baseurl) {\r\n    //     this.spr_sound_q.spriteFrame = this.enablesound;\r\n    // }\r\n    // if (this.url_sound_ans1.string != this.baseurl) {\r\n    //     this.spr_sound_a1.spriteFrame = this.enablesound;\r\n    // }\r\n    // if (this.url_sound_ans2.string != this.baseurl) {\r\n    //     this.spr_sound_a2.spriteFrame = this.enablesound;\r\n    // }\r\n    // if (this.url_sound_ans3.string != this.baseurl) {\r\n    //     this.spr_sound_a3.spriteFrame = this.enablesound;\r\n    // }\r\n    // if (this.url_sound_ans4.string != this.baseurl) {\r\n    //     this.spr_sound_a4.spriteFrame = this.enablesound;\r\n    // }\r\n  }\r\n\r\n  LoadImage(remoteUrl, Sprite) {\r\n    console.log(remoteUrl);\r\n    assetManager.loadRemote(remoteUrl, (err, imageAsset) => {\r\n      const spriteFrame = new SpriteFrame();\r\n      const tex = new Texture2D();\r\n      tex.image = imageAsset;\r\n      spriteFrame.texture = tex;\r\n      Sprite.spriteFrame = spriteFrame;\r\n    });\r\n  }\r\n\r\n  setAmountItem(event, customdata) {\r\n    console.log(customdata);\r\n    this.Index = customdata;\r\n    this.AmountItem.forEach((element) => {\r\n      element.active = true;\r\n    });\r\n    this.PositionAns.forEach((element) => {\r\n      element.active = true;\r\n    });\r\n    if (customdata == 1) {\r\n      this.AmountItem[1].active = false;\r\n      this.AmountItem[2].active = false;\r\n      this.AmountItem[3].active = false;\r\n      this.AmountItem[4].active = false;\r\n\r\n      this.PositionAns[1].active = false;\r\n      this.PositionAns[2].active = false;\r\n      this.PositionAns[3].active = false;\r\n      this.PositionAns[4].active = false;\r\n    }\r\n    if (customdata == 2) {\r\n      this.AmountItem[2].active = false;\r\n      this.AmountItem[3].active = false;\r\n      this.AmountItem[4].active = false;\r\n\r\n      this.PositionAns[2].active = false;\r\n      this.PositionAns[3].active = false;\r\n      this.PositionAns[4].active = false;\r\n    }\r\n    if (customdata == 3) {\r\n      console.log(\"customdata\", this.Index);\r\n      this.AmountItem[3].active = false;\r\n      this.AmountItem[4].active = false;\r\n\r\n      this.PositionAns[3].active = false;\r\n      this.PositionAns[4].active = false;\r\n    }\r\n    if (customdata == 4) {\r\n      this.AmountItem[4].active = false;\r\n\r\n      this.PositionAns[4].active = false;\r\n    }\r\n  }\r\n\r\n  uuidv4() {\r\n    var uuid = ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, (c) =>\r\n      (\r\n        c ^\r\n        (crypto.getRandomValues(new Uint8Array(1))[0] & (15 >> (c / 4)))\r\n      ).toString(16)\r\n    );\r\n    return uuid;\r\n  }\r\n\r\n  public addTPNL(){\r\n    window.top.showmodal( [],this.iditem.string, 0\r\n    );\r\n   }\r\n\r\n}\r\n"]}