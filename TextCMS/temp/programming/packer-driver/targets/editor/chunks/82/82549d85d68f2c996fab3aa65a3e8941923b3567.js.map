{"version":3,"sources":["file:///D:/dientuphudong/assets/Scripts/move.ts"],"names":["_decorator","Component","Node","Vec2","UITransform","ccclass","property","move","pos","onLoad","node","position","x","y","on","EventType","TOUCH_MOVE","onButtonTouchMove","TOUCH_END","onButtonTouchCancel","onButtonTouchBegin","evt","console","warn","onButtonTouchEnd","getUIDelta","setPosition","log","posParentX_left","getParent","getComponent","width","posParentX_right","posParentY_up","height","posParentY_down"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Vec2, Vec3, UITransform } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('move')\r\nexport class move extends Component {\r\n\r\n    pos = null;\r\n    onLoad(){\r\n       this.pos = new Vec2(this.node.position.x,this.node.position.y);\r\n       this.node.on(Node.EventType.TOUCH_MOVE, this.onButtonTouchMove, this);\r\n       this.node.on(Node.EventType.TOUCH_END, this.onButtonTouchCancel, this);\r\n\r\n\r\n    }\r\n    \r\n    onButtonTouchBegin (evt) {\r\n        console.warn('BUTTON TOUCH START');\r\n    }\r\n\r\n    onButtonTouchEnd (evt) {\r\n        console.warn('BUTTON TOUCH END');\r\n    }\r\n\r\n    onButtonTouchMove (evt) {\r\n        //   console.warn('BUTTON TOUCH MOVE',evt.getUIDelta());\r\n        // var touchDelta = evt.touch.getDelta();\r\n        // this.node.setPosition += evt.getUIDelta();\r\n        // console.log(this.node.position.x,this.node.position.y);\r\n        var x =  this.node.position.x + evt.getUIDelta().x;\r\n        var y =this.node.position.y + evt.getUIDelta().y;\r\n        this.node.setPosition(x,y);\r\n        //   var pos: Vec2 = this.node.getPosition();\r\n        //   this.node.setPosition(pos.add(evt.getUIDelta()));\r\n    }\r\n\r\n    onButtonTouchCancel (evt) {\r\n        // x = 111, y = 120\r\n        console.log(\"Node pos: \",this.node.position.x,this.node.position.y);\r\n        var posParentX_left = -(this.node.getParent().getComponent(UITransform).width / 2);\r\n        var posParentX_right = (this.node.getParent().getComponent(UITransform).width / 2);\r\n        var posParentY_up = (this.node.getParent().getComponent(UITransform).height / 2);\r\n        var posParentY_down = -(this.node.getParent().getComponent(UITransform).height / 2);\r\n        console.log(\"parent Pos: \",posParentX_left,posParentX_right,posParentY_up,posParentY_down);\r\n        if(this.node.position.x > posParentX_left  && this.node.position.x < posParentX_right && this.node.position.y < posParentY_up && this.node.position.y > posParentY_down){\r\n           console.log(\"in side parent\");\r\n        }else{\r\n             this.node.setPosition(this.pos.x,this.pos.y);\r\n            console.log(\"out side parent\");\r\n        }\r\n    }\r\n    // &&  this.node.position.y < posParentY_up && this.node.position.y > posParentY_down\r\n}\r\n\r\n"]}